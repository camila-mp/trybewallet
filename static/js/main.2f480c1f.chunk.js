(this["webpackJsonpsd-0x-project-webwallet"]=this["webpackJsonpsd-0x-project-webwallet"]||[]).push([[0],{33:function(e,t,n){e.exports=n(47)},42:function(e,t,n){},43:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(21),l=n.n(c),o=n(19),i=n(14),u=(n(42),n(3)),s=n(4),h=n(6),d=n(5),p=n(2),m=n(18),b=n(8),E=(n(43),n(12)),f=n.n(E),v=n(16);var j=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(b.a)(a)),a.handleValidation=a.handleValidation.bind(Object(b.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(a)),a.handleUserInfo=a.handleUserInfo.bind(Object(b.a)(a)),a.state={email:"",senha:""},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){document.querySelector("button").disabled=!0}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.email;e.senha&&t&&this.handleValidation()}},{key:"handleChange",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState((function(){return Object(m.a)({},a,n)}))}},{key:"handleSubmit",value:function(e){e.target.preventDefault()}},{key:"handleUserInfo",value:function(e,t){(0,this.props.dispatchUserInfo)(e,t)}},{key:"handleValidation",value:function(){var e=document.querySelector("button");e.disabled=!0;var t=this.state,n=t.email,a=t.senha.length,r=/\S+@\S+\.\S+/.test(n);a>=6&&!0===r&&(e.disabled=!1)}},{key:"render",value:function(){var e=this,t=this.state,n=t.email,a=t.senha;return r.a.createElement("div",{className:"login-div"},r.a.createElement("h1",null,"WebWallet"),r.a.createElement("h2",null,"Login"),r.a.createElement("form",{className:"login-form",onSubmit:this.handleSubmit},r.a.createElement("label",{htmlFor:"email"},"Email:",r.a.createElement("input",{"data-testid":"email-input",id:"email",type:"text",name:"email",value:n,onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"senha"},"Senha:",r.a.createElement("input",{"data-testid":"password-input",id:"senha",type:"password",name:"senha",value:a,onChange:this.handleChange})),r.a.createElement(o.b,{to:"/carteira"},r.a.createElement("button",{className:"login-button",type:"submit",onClick:function(){return e.handleUserInfo(n,a)}},"Entrar"))))}}]),n}(r.a.Component),O=Object(i.b)(null,(function(e){return{dispatchUserInfo:function(t,n){return e(function(e,t){return{type:"USER_LOGIN",email:e,senha:t}}(t,n))}}}))(j),g=(n(46),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.userEmail,n=e.totalValue;return r.a.createElement("header",null,r.a.createElement("h1",null,"WebWallet"),r.a.createElement("h3",{"data-testid":"email-field"},"Email:\xa0",t),r.a.createElement("h3",null,"Despesa total: R$\xa0",r.a.createElement("span",{"data-testid":"total-field"},n.toFixed(2))),r.a.createElement("h3",{"data-testid":"header-currency-field"},"Moeda: BRL"))}}]),n}(r.a.Component)),y=Object(i.b)((function(e){return{userEmail:e.user.email}}),null)(g),x=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.handleChange;return r.a.createElement("label",{htmlFor:"valor"},"Valor",r.a.createElement("input",{type:"text",id:"valor",name:"value",onChange:e}))}}]),n}(r.a.Component),C=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.handleChange;return r.a.createElement("label",{htmlFor:"descricao"},"Descri\xe7\xe3o",r.a.createElement("input",{type:"text",id:"descricao",name:"description",onChange:e}))}}]),n}(r.a.Component),k=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.currencies,n=e.handleChange,a=Object.keys(t).filter((function(e){return"USDT"!==e&&"DOGE"!==e}));return r.a.createElement("label",{htmlFor:"moeda"},"Moeda\xa0",r.a.createElement("select",{className:"select",type:"text",id:"moeda",name:"currency",onChange:n},a.map((function(e){return r.a.createElement("option",{key:e},e)}))))}}]),n}(r.a.Component),w=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.handleChange;return r.a.createElement("label",{htmlFor:"tag"},"Tag\xa0",r.a.createElement("select",{className:"select",type:"text",id:"tag",name:"tag",onChange:e},r.a.createElement("option",null,"Alimenta\xe7\xe3o"),r.a.createElement("option",null,"Lazer"),r.a.createElement("option",null,"Trabalho"),r.a.createElement("option",null,"Transporte"),r.a.createElement("option",null,"Sa\xfade")))}}]),n}(r.a.Component),S=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.handleChange;return r.a.createElement("label",{htmlFor:"met-pagamento"},"M\xe9todo de pagamento\xa0",r.a.createElement("select",{className:"select",type:"text",id:"met-pagamento",name:"method",onChange:e},r.a.createElement("option",null,"Dinheiro"),r.a.createElement("option",null,"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",null,"Cart\xe3o de d\xe9bito")))}}]),n}(r.a.Component),R=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleClick=a.handleClick.bind(Object(b.a)(a)),a}return Object(s.a)(n,[{key:"handleClick",value:function(){var e=Object(v.a)(f.a.mark((function e(t){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,a=n.exclude,r=n.calculateExpenses,e.next=3,a(t);case 3:r();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderTableHeader",value:function(){return["Descri\xe7\xe3o","Tag","M\xe9todo de pagamento","Valor","Moeda","C\xe2mbio utilizado","Valor convertido","Moeda de convers\xe3o","Excluir"].map((function(e){return r.a.createElement("th",{key:e},e)}))}},{key:"renderTableInfo",value:function(){var e=this,t=this.props.expenses;if(t.length>0)return t.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.tag),r.a.createElement("td",null,t.method),r.a.createElement("td",null,+t.value),r.a.createElement("td",null,t.exchangeRates[t.currency].name.split("/")[0]),r.a.createElement("td",null,(+t.exchangeRates[t.currency].ask).toFixed(2)),r.a.createElement("td",null,(t.exchangeRates[t.currency].ask*t.value).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button","data-testid":"delete-btn",className:"delete-button",onClick:function(){return e.handleClick(t.id)}},"Excluir")))}))}},{key:"render",value:function(){return r.a.createElement("table",{className:"expenses-table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,this.renderTableHeader()),this.renderTableInfo()))}}]),n}(r.a.Component),N=Object(i.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{exclude:function(t){return e(function(e){return{type:"EXCLUDE_EXPENSE",id:e}}(t))}}}))(R),_=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).idCounter=a.idCounter.bind(Object(b.a)(a)),a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.updateExpenses=a.updateExpenses.bind(Object(b.a)(a)),a.calculateExpenses=a.calculateExpenses.bind(Object(b.a)(a)),a.state={currencies:{},totalValue:0,id:-1,value:0,description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.fetchCurrencies()}},{key:"handleChange",value:function(e){var t=e.target.name,n=e.target.value;"number"===typeof n&&(n=n.toString()),this.setState(Object(m.a)({},t,n))}},{key:"updateExpenses",value:function(){var e=Object(v.a)(f.a.mark((function e(){var t,n,a,r,c,l,o,i,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.idCounter(),t=this.props.fetchExchange,n=this.state,a=n.value,r=n.description,c=n.currency,l=n.method,o=n.tag,i=n.id,u={id:i+1,value:a,description:r,currency:c,method:l,tag:o},e.next=6,t(u);case 6:this.calculateExpenses();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"idCounter",value:function(){this.setState((function(e){return{id:e.id+1}}))}},{key:"fetchCurrencies",value:function(){var e=Object(v.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,this.setState({currencies:n}),e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",console.error(e.t0));case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"calculateExpenses",value:function(){var e=this.props.expensesInfo.reduce((function(e,t){var n=t.value,a=t.currency;return+n*t.exchangeRates[a].ask+e}),0);this.setState({totalValue:e})}},{key:"render",value:function(){var e=this.state,t=e.currencies,n=e.totalValue;return r.a.createElement("div",null,r.a.createElement(y,{totalValue:n}),r.a.createElement("form",{className:"wallet-form"},r.a.createElement(x,{handleChange:this.handleChange}),r.a.createElement(C,{handleChange:this.handleChange}),r.a.createElement(k,{handleChange:this.handleChange,currencies:t}),r.a.createElement(w,{handleChange:this.handleChange}),r.a.createElement(S,{handleChange:this.handleChange}),r.a.createElement("button",{className:"expense-button",type:"button",onClick:this.updateExpenses},"Adicionar despesa")),r.a.createElement(N,{calculateExpenses:this.calculateExpenses}))}}]),n}(r.a.Component),D=Object(i.b)((function(e){return{expensesInfo:e.wallet.expenses}}),(function(e){return{fetchExchange:function(t){return e((n=t,function(){var e=Object(v.a)(f.a.mark((function e(t){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"REQ_EXCHANGE_R"}),e.prev=1,e.next=4,fetch("https://economia.awesomeapi.com.br/json/all");case 4:return a=e.sent,e.next=7,a.json();case 7:return r=e.sent,n.exchangeRates=r,e.abrupt("return",t({type:"WALLET_USER_EXPENSE",expense:n}));case 12:return e.prev=12,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",t({type:"ERR_EXCHANGE_R"}));case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()));var n}}}))(_),U=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"app-div"},r.a.createElement(p.a,{exact:!0,path:"/",component:O}),r.a.createElement(p.a,{path:"/carteira",component:D}))}}]),n}(r.a.Component),I=n(15),T=n(30),V=n(31),L={email:"",senha:""},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN":return{email:t.email,senha:t.senha};default:return e}},A=n(32),F=n(13),M={expenses:[],loadingExchange:!1,errorE:!1},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EXCLUDE_EXPENSE":return Object(F.a)(Object(F.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.id}))});case"WALLET_USER_EXPENSE":return Object(F.a)(Object(F.a)({},e),{},{expenses:[].concat(Object(A.a)(e.expenses),[t.expense])});case"REQ_EXCHANGE_R":return Object(F.a)(Object(F.a)({},e),{},{loadingExchange:!0});case"REC_EXCHANGE_R":return Object(F.a)(Object(F.a)({},e),{},{loadingExchange:!1});case"ERR_EXCHANGE_R":return Object(F.a)(Object(F.a)({},e),{},{errorE:!0});default:return e}},G=Object(I.combineReducers)({user:X,wallet:W}),H=Object(I.createStore)(G,Object(T.composeWithDevTools)(Object(I.applyMiddleware)(V.a)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(o.a,null,r.a.createElement(i.a,{store:H},r.a.createElement(U,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.2f480c1f.chunk.js.map